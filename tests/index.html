<!DOCTYPE html>
<head >
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
<title>city</title>
<!-- 大搜索通用样式 -->
<link rel="stylesheet" type="text/css" href="http://s1.qhimg.com/static/b9533b44a0e8ed12.css"/>
<link rel="stylesheet" href="http://s4.qhimg.com/static/c8243de50db4649c/mocha.css" />

<link rel="stylesheet" type="text/css" href="../src/citypick.css">
</head>
<body>

<div id="main">
	<div class="r-results">
		<div class="res-list mohe-cards" id="mohe-m-xxx" style="height:2000px;">
			<div class="mohe-card" style="margin-top: 200px;">
				<input id="test" type="text" value="" style="width:96%;height:50px;padding:0 2%;">
			</div>
		</div>
	</div>
</div>

<style type="text/css">
	.city-panel .city-curr,
	.city-panel .city-wrap .item-hot dt {
		display: -webkit-box;
		-webkit-box-align: center;
		display: flex;
		align-items: center;
	}
	.city-panel .city-curr::before{
		content: "";
		display: block;
		width: 15px;
		height: 20px;
		background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2tpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1QTk4QThCNTAyNzJFMzExOUU0QkJBQjhBNUU1NEVCNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjU4OTY1ODgzMzExMUUzQjRFN0RGQzdFQUE5MTQ5RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjU4OTY1NzgzMzExMUUzQjRFN0RGQzdFQUE5MTQ5RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpkOGZmYWY0Zi05NGI2LTQ0NTItYjNjOS00MzQ1ODlkMmZiNDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUE5OEE4QjUwMjcyRTMxMTlFNEJCQUI4QTVFNTRFQjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5W7GSlAAACmElEQVR42rSXPWhUQRSF3+ZnEcQkhSZ9/MFCRQMW2idBgxZGURAsBBcSRW39i2AUCxuNZFUCdkFQBBFTiCBaqoVILFYI2gREs2BMobiuxnPkPNDl7dyZl30HPljevXPPG97OzJ1coVCIPNQK+kEv2Aq6QYdi8+A9eAWegMfgp1WwxYiz+EkwDFbVyekS28BxUAbj4KpeKlFNDtMDoATOO0yTtFJjSqrhbdwMiuCOZpJWXapRVE2nMRPugqGocRpSzWaXMb/LnqjxYs1r9Yz3g2NRdjoqj/+M+e8di7LXWLwMY2MumU6PgVwqp8EmsExsBiOKWeqU11/jvNappftgDbgMpsEP8QaMgtXKsUSvPI37PNYpC+4DXx05C8qxzOnVFxu7NAcOg0WP2Swq97OR10/jHiPpumbjqwUtS5d6aLzOSHqY4t/7yIivpXG7kVRKYfzOiLc3ZbRe80Y8R+MvRtL6FMbdRnyexjNG0u4UxgNGfIbGL4wk7t9tAaZt8e7k0EsaT3lsc7f5XTxMc8q1tt8pGj9Tz+TSoM7UFY4cxu4p16UP4CmNf4MrHrPZqxc8BTaoAVwOtoCzig161LkEfuXUZbLpe62CWYp7wkZQjddxFRwClQxNY49qbQfCGZ/L0PiCeu/EnovfejID0wfgoqvZ47F2xGNth4i1DtYeq0l79XddV6YbYMoau8A335sEO42dYHYJprOqMRd6heHAHfUGejSFzhe3jsW36qNClllFm43zU/mcx891C/TVCY2JlmpM3dI+bIk5N30KhnQgw0bTXvbsz4ONy9rgXZt/OQvjSHfdTwnP+exGSKFQY/5jJxKeT+g6k5lxPOtKzcsUQ4ukMf5Yc5BM6lmQWqJ0OgO2//M7WH8EGAD/oIZimAzpXwAAAABJRU5ErkJggg==) no-repeat;
		-webkit-background-size: cover;
		background-size: cover;
		margin-left:-20px;
		margin-right: 5px;
	}
	.city-panel .city-wrap .item-hot dt::before{
		display: block;
	}
	.city-panel .city-wrap .item-hot dt::after{
		content: "门城市";
	}
</style>
<div class="city-panel page-panel" style="display:none;">
	<div class="input-wrap">
		<div class="input-box">
			<form class="input-form">
				<input type="text" placeholer="请输入城市名称"/>
			</form>
			<button type="button" style="display:none;">X</button>
		</div>
	</div>
	<div class="city-wrap">
		<div class="item-wrap">
			<div class="item-location list-item">
				<div class="city-curr">当前城市：<span class="cp-location sugg-item-cont"></span></div>
				<button type="button" class="panel-cancel">取消</button>
			</div>
			<div class="item-data">
				<div class="item-scroller">
					<div class="item-hot">
						
					</div>
					<div class="item-list">
						
					</div>
				</div>
				<ul class="item-elevator"></ul>
				<div class="item-tip"></div>
			</div>
		</div>
		<div class="suggest-wrap">
			<div class="sugg-list"></div>
		</div>
	</div>
	<script type="text/x-handlebars-template" class="item-template">
		{{#each list}}
			<dl>
				<dt class="list-item" data-key="{{@key}}">{{@key}}</dt>
				{{#each this}}
					<dd class="list-item sugg-item sugg-item-cont">{{this.name}}</dd>
				{{/each}}
			</dl>
		{{/each}}
	</script>
	<script type="text/x-handlebars-template" class="sugg-template">
		<ul>
			{{#each list}}
				<li class="list-item sugg-item">
					<div class="sugg-item-cont">{{this.name}}</div>
					<div class="sugg-item-copy"></div>
				</li>
			{{/each}}
		</ul>
	</script>
</div>

<script type="text/javascript" src="http://s0.qhimg.com/static/24fee17ef5eeefee/zepto_touch_fx.112.js"></script>
<script type="text/javascript" src="http://s0.qhimg.com/static/05e5e157e7b8d30d/mocha.js"></script>
<script type="text/javascript" src="http://s4.qhimg.com/static/3277fa15cc2352ec/chai.js"></script>
<script type="text/javascript" src="http://s0.qhimg.com/static/a544ceb156ebf3bf/sinon.js"></script>

<script src="../libs/widget.js"></script>
<script src="../libs/suggest.js"></script>
<script src="../libs/handlebars.js"></script>
<script src="../libs/iscroll-probe.js"></script>
<script src="../libs/elevator.js"></script>
<script src="../libs/scrollTips.js"></script>
<script src="../libs/pagePanel.js"></script>

<script src="../src/citypick.js"></script>

<script src="http://s6.qhimg.com/!b5ea8e7a/m-city-v1.js"></script>
<script type="text/javascript">
(function(){
	window.list = {};
	
	$.each(cityList, function(index, item){
		var tmpGroup = item.nameEn ? item.nameEn.charAt(0).toUpperCase() : '#';
		
		if (!(list[tmpGroup] instanceof Array)) {
			list[tmpGroup] = [];
		}
		
		list[tmpGroup].push(item);
	});
})();
</script>
<script type="text/javascript">
	var cityPanel = $('.city-panel')
	var citypick = new Citypick({
		cityList: cityList,
		cityGroupList: list,
		element: cityPanel,
		needSuggest: true
	});

	$('#test').on('focus', function(){
		citypick.show(this.value);
	});
	citypick.on('select', function(e, d){
		$('#test').val(d.value);
	});
	/*citypick.on('setup', function(e, d){
		var locationIp = '';
		$.ajax({
			url:"http://open.onebox.so.com/api/hotcity",
			dataType:"jsonp",
			data:{"ip":locationIp},
			success:function(data){
				var city = "";
				if(data && data.location){
					city = data.location;
				}
				$('.cp-location', cityPanel).html(city);

				if (data && data.hot) {
					var hot = $.map(data.hot, function(item){
						return {name: item};
					});
					var html = cp.itemTemplate({list:{'热':hot}});
					$('.item-hot', cityPanel).html(html);
				}

				citypick.refresh();
			}
		});
	})*/
	citypick.plugins.pagePanel.set('hash', 'citypick');
</script>
</body>
</html>
